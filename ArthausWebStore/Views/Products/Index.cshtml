@model ArthausWebStore.ViewModels.ProductsViewModel
@using ArthausWebStore.Models.Repositories;
<!-- HEADING-BANNER START -->
<div class="heading-banner-area overlay-bg" src="~/img/bg/1.jpg" alt="asp-append-version="true"">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="heading-banner">
                    <div class="heading-banner-title">
                        <h2>Arthaus - Product Catalog</h2>
                    </div>
                    <div class="breadcumbs pb-15">
                        <ul>
                            <li><a asp-controller="Home" asp-action="Index">Home</a></li>
                            <li>Product Catalog</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- HEADING-BANNER END -->
<!-- PRODUCT-AREA START -->
<div class="product-area pt-80 pb-80 product-style-2">
    <div class="container">
        <div class="row">
            <div class="col-md-3 col-sm-12 col-xs-12">
                <!-- Widget-Search start -->
                <aside class="widget widget-search mb-30">
                    <form action="#">
                        <input type="text" placeholder="Search here..." />
                        <button type="submit">
                            <i class="zmdi zmdi-search"></i>
                        </button>
                    </form>
                </aside>
                <!-- Widget-search end -->
                <!-- Widget-Categories start -->
                <aside class="widget widget-categories  mb-30">
                    <div class="widget-title">
                        <h4>Categories</h4>
                    </div>
                    <div id="cat-treeview" class="widget-info product-cat boxscrol2">
                        <ul>
                            <li>
                                <span>Chair</span>
                                <ul>
                                    <li><a href="#">T-Shirts</a></li>
                                    <li><a href="#">Striped Shirts</a></li>
                                    <li><a href="#">Half Shirts</a></li>
                                    <li><a href="#">Formal Shirts</a></li>
                                    <li><a href="#">Bilazers</a></li>
                                </ul>
                            </li>
                            <li class="open">
                                <span>Furniture</span>
                                <ul>
                                    <li><a href="#">Men Bag</a></li>
                                    <li><a href="#">Shoes</a></li>
                                    <li><a href="#">Watch</a></li>
                                    <li><a href="#">T-shirt</a></li>
                                    <li><a href="#">Shirt</a></li>
                                </ul>
                            </li>
                            <li>
                                <span>Accessories</span>
                                <ul>
                                    <li><a href="#">T-Shirts</a></li>
                                    <li><a href="#">Striped Shirts</a></li>
                                    <li><a href="#">Half Shirts</a></li>
                                    <li><a href="#">Formal Shirts</a></li>
                                    <li><a href="#">Bilazers</a></li>
                                </ul>
                            </li>
                            <li>
                                <span>Top Brands</span>
                                <ul>
                                    <li><a href="#">T-Shirts</a></li>
                                    <li><a href="#">Striped Shirts</a></li>
                                    <li><a href="#">Half Shirts</a></li>
                                    <li><a href="#">Formal Shirts</a></li>
                                    <li><a href="#">Bilazers</a></li>
                                </ul>
                            </li>
                            <li>
                                <span>Jewelry</span>
                                <ul>
                                    <li><a href="#">T-Shirts</a></li>
                                    <li><a href="#">Striped Shirts</a></li>
                                    <li><a href="#">Half Shirts</a></li>
                                    <li><a href="#">Formal Shirts</a></li>
                                    <li><a href="#">Bilazers</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </aside>
                <!-- Widget-categories end -->
                <!-- Shop-Filter start -->
                <aside class="widget shop-filter mb-30">
                    <div class="widget-title">
                        <h4>Price</h4>
                    </div>
                    <div class="widget-info">
                        <div class="price_filter">
                            <div class="price_slider_amount">
                                <input type="submit" value="You range :" />
                                <input type="text" id="amount" name="price" placeholder="Add Your Price" />
                            </div>
                            <div id="slider-range"></div>
                        </div>
                    </div>
                </aside>
                <!-- Shop-Filter end -->
                <!-- Widget-Color start -->
                <aside class="widget widget-color mb-30">
                    <div class="widget-title">
                        <h4>Color</h4>
                    </div>
                    <div class="widget-info color-filter clearfix">
                        <ul>
                            <li><a href="#"><span class="color color-1"></span>LightSalmon<span class="count">12</span></a></li>
                            <li><a href="#"><span class="color color-2"></span>Dark Salmon<span class="count">20</span></a></li>
                            <li><a href="#"><span class="color color-3"></span>Tomato<span class="count">59</span></a></li>
                            <li class="active"><a href="#"><span class="color color-4"></span>Deep Sky Blue<span class="count">45</span></a></li>
                            <li><a href="#"><span class="color color-5"></span>Electric Purple<span class="count">78</span></a></li>
                            <li><a href="#"><span class="color color-6"></span>Atlantis<span class="count">10</span></a></li>
                            <li><a href="#"><span class="color color-7"></span>Deep Lilac<span class="count">15</span></a></li>
                        </ul>
                    </div>
                </aside>
                <!-- Widget-Color end -->
                <!-- Widget-Size start -->
                <aside class="widget widget-size mb-30">
                    <div class="widget-title">
                        <h4>Size</h4>
                    </div>
                    <div class="widget-info size-filter clearfix">
                        <ul>
                            <li><a href="#">M</a></li>
                            <li class="active"><a href="#">S</a></li>
                            <li><a href="#">L</a></li>
                            <li><a href="#">SL</a></li>
                            <li><a href="#">XL</a></li>
                        </ul>
                    </div>
                </aside>
                <!-- Widget-Size end -->
                <!-- Widget-banner start -->
                <aside class="widget widget-banner hidden-sm">
                    <div class="widget-info widget-banner-img">
                        <a href="#"><img src="img/banner/5.jpg" alt="" /></a>
                    </div>
                </aside>
                <!-- Widget-banner end -->
            </div>
            <div class="col-md-9 col-sm-12 col-xs-12">
                <!-- Shop-Content End -->
                <div class="shop-content mt-tab-30 mt-xs-30">
                    <div class="product-option mb-30 clearfix">
                        <!-- Nav tabs -->
                        <ul class="shop-tab">
                            <li class="active"><a href="#grid-view" data-toggle="tab"><i class="zmdi zmdi-view-module"></i></a></li>
                            <li><a href="#list-view" data-toggle="tab"><i class="zmdi zmdi-view-list"></i></a></li>
                        </ul>
                        <div class="showing text-right hidden-xs">
                            <p class="mb-0">Showing 01-09 of 17 Results</p>
                        </div>
                    </div>
                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div class="tab-pane active" id="grid-view">
                            <div class="row">
                                @foreach (var product in Model.ProductGrid.ToList())
                                {
                                <!-- Single-product start -->
                                <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                    <div class="single-product">
                                        <div class="product-img">
                                            @{
                                                var oldPrice = @Model.ItemPrices.Where(p => p.No == product.No).FirstOrDefault();

                                                var newPrice = @Common.ReturnAppliedPrice(product.No, Model.ItemPrices.ToList());
                                               
                                                var showDiscount = @Common.ShowDiscounted(product.No, Model.ItemPrices.ToList());
                                                if (!showDiscount)
                                                {
                                                    <span class="pro-label sale-label">Sale</span>
                                                }
                                            }
                                            <span class="pro-price-2">@newPrice.ToString()</span>
                                            <a href="single-product.html"><img src="@Common.ReturnPicture(product.No,PictureSizes.Thumbnail)" alt="" /></a>
                                        </div>
                                        <div class="product-info clearfix text-center">
                                            <div class="fix">
                                                <h4 class="post-title"><a href="#">@product.Description2</a></h4>
                                            </div>
                                            <div class="fix">
                                                <span class="pro-rating">
                                                    <a href="#"><i class="zmdi zmdi-star"></i></a>
                                                    <a href="#"><i class="zmdi zmdi-star"></i></a>
                                                    <a href="#"><i class="zmdi zmdi-star"></i></a>
                                                    <a href="#"><i class="zmdi zmdi-star-half"></i></a>
                                                    <a href="#"><i class="zmdi zmdi-star-half"></i></a>
                                                </span>
                                            </div>
                                            <div class="product-action clearfix">
                                                <a href="#" data-toggle="tooltip" data-placement="top" title="Wishlist"><i class="zmdi zmdi-favorite-outline"></i></a>
                                                <a asp-controller="Home" asp-action="QuickView" asp-route-ItemSKU=@product.No data-target="#productMod" data-toggle="modal" title="Quick View"><i class="zmdi zmdi-zoom-in"></i></a>                                            
                                                <a href="#" data-toggle="tooltip" data-placement="top" title="Compare"><i class="zmdi zmdi-refresh"></i></a>
                                                <a href="#" data-toggle="tooltip" data-placement="top" title="Add To Cart"><i class="zmdi zmdi-shopping-cart-plus"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                               }
                            </div>
                        </div>
                        <div class="tab-pane" id="list-view">
                            <div class="row shop-list">
                                @foreach (var product in Model.ProductGrid.ToList())
                                {
                                    <!-- Single-product start -->
                                    <div class="col-lg-12">
                                        <div class="single-product clearfix">
                                            <div class="product-img">
                                                @{
                                                    var oldPrice = @Common.ReturnNormalPrice(product.No, Model.ItemPrices.ToList()).Take(1);
                                                    var newPrice = @Common.ReturnAppliedPrice(product.No, Model.ItemPrices.ToList()).Take(1);

                                                    var showDiscount = @Common.ShowDiscounted(product.No, Model.ItemPrices.ToList());
                                                    if (!showDiscount)
                                                    {
                                                     <span class="pro-label sale-label">Sale</span>
                                                    }

                                                }
                                                <span class="pro-price-2">@newPrice.ToString()</span>
                                                <a href="single-product.html"><img src="@Common.ReturnPicture(product.No,PictureSizes.Thumbnail)" alt="" /></a>
                                            </div>
                                            <div class="product-info">
                                                <div class="fix">
                                                    <h4 class="post-title floatleft"><a href="#">@product.Description2</a></h4>
                                                    <span class="pro-rating floatright">
                                                        <a href="#"><i class="zmdi zmdi-star"></i></a>
                                                        <a href="#"><i class="zmdi zmdi-star"></i></a>
                                                        <a href="#"><i class="zmdi zmdi-star"></i></a>
                                                        <a href="#"><i class="zmdi zmdi-star-half"></i></a>
                                                        <a href="#"><i class="zmdi zmdi-star-half"></i></a>
                                                        <span>( 27 Rating )</span>
                                                    </span>
                                                </div>
                                                <div class="fix mb-20">
                                                    <span class="pro-price">@newPrice.ToString()</span>
                                                </div>
                                                <div class="product-description">
                                                    <p>@String.Format("{0} {1} - {2}", product.SeasonCode, product.Collection,product.CollectionYear)</p>
                                                </div>
                                                <div class="clearfix">
                                                    <div class="cart-plus-minus">
                                                        <input type="text" value="01" name="qtybutton" class="cart-plus-minus-box">
                                                    </div>
                                                    <div class="product-action clearfix">
                                                        <a href="#" data-toggle="tooltip" data-placement="top" title="Wishlist"><i class="zmdi zmdi-favorite-outline"></i></a>
                                                        <a asp-controller="Home" asp-action="QuickView" asp-route-ItemSKU=@product.No data-target="#productMod" data-toggle="modal" title="Quick View"><i class="zmdi zmdi-zoom-in"></i></a>
                                                        <a href="#" data-toggle="tooltip" data-placement="top" title="Compare"><i class="zmdi zmdi-refresh"></i></a>
                                                        <a href="#" data-toggle="tooltip" data-placement="top" title="Add To Cart"><i class="zmdi zmdi-shopping-cart-plus"></i></a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Single-product end -->
                                    }
                                </div>
                        </div>
                    </div>
                    <!-- Pagination start -->
                    <div class="shop-pagination  text-center">
                        <div class="pagination">
                            <ul>
                                <li><a href="#"><i class="zmdi zmdi-long-arrow-left"></i></a></li>
                                <li><a href="#">01</a></li>
                                <li class="active"><a href="#">02</a></li>
                                <li><a href="#">03</a></li>
                                <li><a href="#">04</a></li>
                                <li><a href="#">05</a></li>
                                <li><a href="#"><i class="zmdi zmdi-long-arrow-right"></i></a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- Pagination end -->
                </div>
                <!-- Shop-Content End -->
            </div>
        </div>
    </div>
</div>
<!-- PRODUCT-AREA END -->
<!-- FOOTER END -->
<!-- QUICKVIEW PRODUCT -->
<div id="quickview-wrapper">
    <!-- Modal -->
    <div class="modal fade" id="productMod" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

            </div><!-- .modal-content -->
        </div><!-- .modal-dialog -->
    </div>
    <!-- END Modal -->
</div>

<!-- END QUICKVIEW PRODUCT -->
@section scripts {
    @* The normal bootstrap behavior is to only grab the content for the modal once, if you need to pull in different partial views then the data on the modal will have to be cleared.*@
    <script type="text/javascript">

        $(function () {

            // boostrap 4 load modal example from docs
            $('#productMod').on('show.bs.modal', function (event) {
                var button = $(event.relatedTarget); // Button that triggered the modal
                var url = button.attr("href");
                var modal = $(this);

                // note that this will replace the content of modal-content ever time the modal is opened
                modal.find('.modal-content').load(url);
            });
        });
    </script>
}
